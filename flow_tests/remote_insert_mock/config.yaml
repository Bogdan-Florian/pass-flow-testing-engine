file:
  path: test.csv
  delimiter: ','
  encoding: utf-8

batches:
  - name: RemoteInsert
    script: /root/bdk_nb/batch_test_1
    copy_input_file_to: /root/bdk_nb/input
    log_file: remote_insert.log

variables:
  policy_number: ${row.PolicyNumber}
  amount: ${row.Amount}:decimal
  status: ${row.Status}

validations:
  - name: policy_exists
    sql: |
      SELECT policy_number, amount, status
      FROM policies
      WHERE policy_number = :policy_number
    expect:
      row_count: 1
      columns:
        amount: ${amount}
        status: ${status}

execution:
  validation_copy_path: validation_copy/test.csv
  stop_on_first_error: false
